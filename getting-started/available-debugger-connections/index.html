<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Chip Senkbeil">
        <link rel="canonical" href="http://www.scala-debugger.org/getting-started/available-debugger-connections/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        

	<title>Available Debugger Connections - Scala Debugger</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/extra.css" rel="stylesheet">
        <link href="../../css/no-home.css" rel="stylesheet">
        <link href="../../css/font-mfizz-2.2/font-mfizz.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-71733200-1', 'scala-debugger.org');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Scala Debugger</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../what-is-a-debugger/">What is a Debugger?</a>
</li>

                        
                            
<li >
    <a href="../installation/">Installation</a>
</li>

                        
                            
<li class="active">
    <a href="./">Available Debugger Connections</a>
</li>

                        
                            
<li >
    <a href="../event-pipelines/">Event Pipelines</a>
</li>

                        
                            
<li >
    <a href="../working-with-breakpoints/">Working with Breakpoints</a>
</li>

                        
                            
<li >
    <a href="../stepping-through-code/">Stepping through Code</a>
</li>

                        
                            
<li >
    <a href="../watching-class-variables/">Watching class variables</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced Topics <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../advanced-topics/what-is-the-profile-system/">What is the Profile System?</a>
</li>

                        
                            
<li >
    <a href="../../advanced-topics/what-is-the-low-level-api/">What is the Low-Level API?</a>
</li>

                        
                            
<li >
    <a href="../../advanced-topics/using-extra-arguments-for-requests/">Using Extra Arguments for Requests</a>
</li>

                        
                            
<li >
    <a href="../../advanced-topics/making-requests-early/">Making Requests Early</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../cookbook/creating-a-launching-debugger/">Creating a Launching Debugger</a>
</li>

                        
                            
<li >
    <a href="../../cookbook/creating-an-attaching-debugger/">Creating an Attaching Debugger</a>
</li>

                        
                            
<li >
    <a href="../../cookbook/creating-a-listening-debugger/">Creating a Listening Debugger</a>
</li>

                        
                            
<li >
    <a href="../../cookbook/creating-a-breakpoint/">Creating a Breakpoint</a>
</li>

                        
                            
<li >
    <a href="../../cookbook/stepping-over-a-line-of-code/">Stepping over a Line of Code</a>
</li>

                        
                            
<li >
    <a href="../../cookbook/watching-modification-of-a-class-variable/">Watching Modification of a Class Variable</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Scaladoc <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../external/scaladoc-2.10/">Scaladoc 2.10</a>
</li>

                        
                            
<li >
    <a href="../../external/scaladoc-2.11/">Scaladoc 2.11</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../about/roadmap/">Roadmap</a>
</li>

                        
                            
<li >
    <a href="../../about/release-notes/">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../../about/contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../../about/license/">License</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../installation/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../event-pipelines/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/chipsenkbeil/scala-debugger-api/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#available-debugger-connections">Available Debugger Connections</a></li>
        
            <li><a href="#overview">Overview</a></li>
        
            <li><a href="#launching-debugger">Launching Debugger</a></li>
        
            <li><a href="#attaching-debugger">Attaching Debugger</a></li>
        
            <li><a href="#listening-debugger">Listening Debugger</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="available-debugger-connections">Available Debugger Connections<a class="headerlink" href="#available-debugger-connections" title="Permanent link">&para;</a></h1>
<p>In this section, you will get a brief overview of the available options for
connecting a debugger programmatically to one or more target JVMs.</p>
<hr />
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>When you want to debug a JVM, you need to establish some form of communication
between the target JVM, the one you want to debug, and the debugger, the
JVM used to perform the debugging. When using the Java Debugger Interface,
there is an abstraction called a <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/conninv.html">connector</a> that is used when
establishing the connection between a debugger application (using <abbr title="Java Debugger Interface">JDI</abbr>) and the
target JVM.</p>
<p>The two common means of transport are socket-based and memory-based. As the
shared memory transport is limited to Windows, all of the connectors available
in the Scala debugger API use connectors that use socket transportation.</p>
<p>The three most common ways to establish a connection between the debugger and
a target JVM are to launch the target JVM and connect to it, to attach to an
already-running JVM, or to listen for connections from target JVMs.</p>
<p>Below, you will read about these three methods of starting communication with
a target JVM and how you can perform these using the Scala debugger API.</p>
<h2 id="launching-debugger">Launching Debugger<a class="headerlink" href="#launching-debugger" title="Permanent link">&para;</a></h2>
<p>The launching debugger is the commonly-used method in IDEs like Scala IDE and
IntelliJ when you have a program that you both want to start and debug.</p>
<h3 id="instantiating">Instantiating<a class="headerlink" href="#instantiating" title="Permanent link">&para;</a></h3>
<p>To create the launching debugger using the Scala debugger API, you instantiate
a new instance of the debugger using the companion object:</p>
<pre><code class="scala">val launchingDebugger = LaunchingDebugger(className = &quot;some.class.name&quot;)
</code></pre>

<p>The only required argument for the launching debugger is the fully-qualified
class name that you want to use as the entrypoint for the target JVM. The
current classpath of the debugger is used when launching the target JVM; so,
the specified class must exist in your current classpath.</p>
<p>The launching debugger can also take additional arguments including command
line options to pass to the main method, jvm options to provide to the target
JVM when started, and a flag indicating whether or not to suspend the target
JVM until the debugger has connected to it.</p>
<h3 id="starting">Starting<a class="headerlink" href="#starting" title="Permanent link">&para;</a></h3>
<p>When you are ready to launch the target JVM using the provided class as the
entrypoint to the target JVM, call the <code>start</code> method.</p>
<pre><code class="scala">launchingDebugger.start { s =&gt;
  println(&quot;Launched and connected to JVM: &quot; + s.uniqueId)
}
</code></pre>

<p>When you call <code>start</code> with the launching debugger, you provide a function that
takes a <code>ScalaVirtualMachine</code> as an argument. This is treated as a callback
that is invoked when the launching debugger connects to the started target JVM
process.</p>
<h3 id="stopping">Stopping<a class="headerlink" href="#stopping" title="Permanent link">&para;</a></h3>
<p>To stop the launching debugger, you can call the <code>stop</code> function:</p>
<pre><code class="scala">launchingDebugger.stop()
</code></pre>

<p>This kills the target JVM process and stops the debugger.</p>
<h3 id="cookbook">Cookbook<a class="headerlink" href="#cookbook" title="Permanent link">&para;</a></h3>
<p>The <code>ScalaVirtualMachine</code> contains the majority of debugger-related functions
that you can use to invoke <abbr title="Java Debugger Interface">JDI</abbr> operations.</p>
<p>See the <a href="../../cookbook/creating-a-launching-debugger/">cookbook</a> for a full example.</p>
<h2 id="attaching-debugger">Attaching Debugger<a class="headerlink" href="#attaching-debugger" title="Permanent link">&para;</a></h2>
<p>The attaching debugger is the next most-used method in IDEs like Scala IDE and
IntelliJ when you have the source code for the target JVM loaded up but want to
connect to an already-running JVM process.</p>
<p>It begins with the target JVM already running with the necessary JDWP arguments
to expose a TCP port that the debugger will use to connect (attach):</p>
<pre><code># Allow debuggers to attach via port 5005
-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
</code></pre>

<h3 id="instantiating_1">Instantiating<a class="headerlink" href="#instantiating_1" title="Permanent link">&para;</a></h3>
<p>To create the attaching debugger using the Scala debugger API, you instantiate
a new instance of the debugger using the companion object:</p>
<pre><code class="scala">val attachingDebugger = AttachingDebugger(port = 5005)
</code></pre>

<p>The only required argument for the attaching debugger is the port that the
debugger will use when connecting to the target JVM. This port should match the
port you provided in the JDWP arguments to the target JVM when starting it on
your own.</p>
<p>The attaching debugger can also take additional arguments including the hostname
used when connecting to the target JVM (defaulting to localhost) and the maximum
time to wait (in milliseconds) for a successful connection before timing out.</p>
<h3 id="starting_1">Starting<a class="headerlink" href="#starting_1" title="Permanent link">&para;</a></h3>
<p>When you are ready to attach to the target JVM, call the <code>start</code> method.</p>
<pre><code class="scala">attachingDebugger.start { s =&gt;
  println(&quot;Attached to JVM: &quot; + s.uniqueId)
}
</code></pre>

<p>As with the launching debugger, when you call <code>start</code>, you provide a function
that takes a <code>ScalaVirtualMachine</code> as an argument. This function is treated as
a callback that is invoked when the attaching debugger connects to the target
JVM process.</p>
<h3 id="stopping_1">Stopping<a class="headerlink" href="#stopping_1" title="Permanent link">&para;</a></h3>
<p>To stop the attaching debugger, you can call the <code>stop</code> function:</p>
<pre><code class="scala">attachingDebugger.stop()
</code></pre>

<p>This disconnects from the target JVM and stops the debugger. The target JVM
will continue to run and, if suspended, should resume normal execution.</p>
<h3 id="cookbook_1">Cookbook<a class="headerlink" href="#cookbook_1" title="Permanent link">&para;</a></h3>
<p>See the <a href="../../cookbook/creating-an-attaching-debugger/">cookbook</a> for a full example.</p>
<h2 id="listening-debugger">Listening Debugger<a class="headerlink" href="#listening-debugger" title="Permanent link">&para;</a></h2>
<p>The listening debugger is less frequently used as it offers the opposite mode
of connecting. While the launching and attaching debuggers serve to perform the
connection themselves, the listening debugger merely waits for target JVMs to
connect to it.</p>
<pre><code># Connect to a listening debugger via port 5005
-agentlib:jdwp=transport=dt_socket,server=n,suspend=n,address=5005
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note:</p>
<p>The listening debugger is often capable of supporting more than one target
JVM connecting at once. This means that you could have a single debugger
process managing multiple target JVMs such as with a cluster setup.</p>
</div>
<h3 id="instantiating_2">Instantiating<a class="headerlink" href="#instantiating_2" title="Permanent link">&para;</a></h3>
<p>To create the listening debugger using the Scala debugger API, you instantiate
a new instance of the debugger using the companion object:</p>
<pre><code class="scala">val listeningDebugger = ListeningDebugger(port = 5005)
</code></pre>

<p>The only required argument for the listening debugger is the port that the
debugger will use to listen for incoming connections from target JVMs. This
port should match the port you provid in the JDWP arguments to the target
JVMs when starting them. The debugger itself should be started before the
target JVMs as the target JVMs only try to connect once.</p>
<p>The listening debugger can also take additional arguments including the hostname
to bind to when listening for connections (defaulting to localhost) and the
number of worker threads to use when processing new JVM connections (defaulting
to a single thread).</p>
<h3 id="starting_2">Starting<a class="headerlink" href="#starting_2" title="Permanent link">&para;</a></h3>
<p>When you are ready to begin listening for target JVMs, call the <code>start</code> method.</p>
<pre><code class="scala">listeningDebugger.start { s =&gt;
  println(&quot;Received connection from JVM: &quot; + s.uniqueId)
}
</code></pre>

<p>While the listening debugger's <code>start</code> method does take a callback function
like the other two debuggers, this function can be invoked more than once. For
each connection with a target JVM that the debugger receives, it will invoke
the callback and pass it the <code>ScalaVirtualMachine</code> instance representing the
new connection.</p>
<h3 id="stopping_2">Stopping<a class="headerlink" href="#stopping_2" title="Permanent link">&para;</a></h3>
<p>To stop the listening debugger, you can call the <code>stop</code> function:</p>
<pre><code class="scala">listeningDebugger.stop()
</code></pre>

<p>This stops the debugger from listening for JVM connections. The target JVMs
that were connected will continue to run and, if suspended, should resume
normal execution.</p>
<h3 id="cookbook_2">Cookbook<a class="headerlink" href="#cookbook_2" title="Permanent link">&para;</a></h3>
<p>See the <a href="../../cookbook/creating-a-listening-debugger/">cookbook</a> for a full example.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Copyright &copy; 2015 <a href="http://chipsenkbeil.com">Chip Senkbeil</a>.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
